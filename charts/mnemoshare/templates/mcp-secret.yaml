{{- if and .Values.mcp.enabled (not .Values.mcp.apiKey.existingSecret) }}
{{- if .Values.mcp.apiKey.key }}
# MCP API Key secret
# Note: It's recommended to use existingSecret in production and create the
# secret manually after obtaining the key from MnemoShare Admin UI
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "mnemoshare.fullname" . }}-mcp
  labels:
    {{- include "mnemoshare.labels" . | nindent 4 }}
    app.kubernetes.io/component: mcp
type: Opaque
stringData:
  mcp-api-key: {{ .Values.mcp.apiKey.key | quote }}
{{- else }}
# WARNING: No MCP API key configured!
# Either:
#   1. Set mcp.apiKey.existingSecret to reference an existing secret
#   2. Set mcp.apiKey.key to provide the key directly (not recommended for production)
#
# To create the secret manually:
#   kubectl create secret generic <release-name>-mcp --from-literal=mcp-api-key=mcp_xxx
#
# The MCP API key must be created in MnemoShare Admin UI first (Settings â†’ MCP Access)
{{- end }}
{{- end }}
